#!/bin/bash

. $(dirname $0)/__/common
cd $ROOT

ACTION=$1
ARG1=$2

# just in case
rm -rf ./packages/decor/node_modules/mobx 2> /dev/null
rm -rf ./packages/router/node_modules/mobx 2> /dev/null
rm -rf ./packages/black/node_modules/mobx 2> /dev/null
rm -rf ./packages/automagical/node_modules/mobx 2> /dev/null

trap killgroup SIGINT
killgroup() {
  kill 0
}

if [ "$ACTION" = "backend" ]; then
  echo "Open about:inspect in Chrome to debug Node"
  compose up ${@:2}
else
  cd apps/$1
  npm run start ${@:2}
fi
