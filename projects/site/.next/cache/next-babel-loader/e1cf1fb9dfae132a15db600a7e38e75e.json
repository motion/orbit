{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\n\nvar _temp;\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport { createStoreContext } from '@o/kit';\nimport { useDebounce, useDebounceValue, useGet, useIntersectionObserver, View } from '@o/ui';\nimport React, { memo, useCallback, useRef, useState } from 'react';\nimport { useIsTiny } from '../hooks/useScreenSize';\nexport var transitions = {\n  slowNotBouncy: {\n    type: 'spring',\n    damping: 13,\n    stiffness: 80\n  },\n  slowConfig: {\n    type: 'spring',\n    damping: 20,\n    stiffness: 140\n  },\n  normal: {\n    type: 'spring',\n    damping: 12,\n    stiffness: 100\n  },\n  fast: {\n    type: 'spring',\n    damping: 15,\n    stiffness: 180\n  },\n  fastStatic: {\n    duration: 30\n  }\n};\nexport var fadeAnimations = {\n  down: {\n    style: {\n      opacity: 0,\n      y: -20\n    },\n    animate: {\n      opacity: 1,\n      y: 0\n    }\n  },\n  up: {\n    style: {\n      opacity: 0,\n      y: 20\n    },\n    animate: {\n      opacity: 1,\n      y: 0\n    }\n  },\n  right: {\n    style: {\n      opacity: 0,\n      x: 30,\n      rotateX: -15,\n      rotateY: 15,\n      scale: 0.9\n    },\n    animate: {\n      opacity: 1,\n      x: 0,\n      rotateX: 0,\n      rotateY: 0,\n      scale: 1\n    }\n  },\n  left: {\n    style: {\n      opacity: 0,\n      txys: [-30, 15, -15, 0.9],\n      x: -30,\n      rotateX: 15,\n      rotateY: -15,\n      scale: 0.9\n    },\n    animate: {\n      opacity: 1,\n      x: 0,\n      rotateX: 0,\n      rotateY: 0,\n      scale: 1\n    }\n  }\n};\nvar FadeContext = createStoreContext((_temp = class FadeContextStore {\n  constructor() {\n    this.props = void 0;\n  }\n\n  get shown() {\n    return this.props.shown;\n  }\n\n  get off() {\n    return this.props.off;\n  }\n\n  // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {\n    // @ts-ignore\n    this[key] = eval(code);\n  }\n\n}, _temp));\nexport var FadeChild = memo(__signature__((_ref) => {\n  var {\n    style = fadeAnimations.down.style,\n    animate = fadeAnimations.down.animate,\n    transition = transitions.normal,\n    children,\n    delay,\n    disable,\n    fullscreen\n  } = _ref,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"style\", \"animate\", \"transition\", \"children\", \"delay\", \"disable\", \"fullscreen\"]);\n\n  var isTiny = useIsTiny();\n  var fadeContext = FadeContext.useStore();\n  var shown = !!useDebounceValue(!disable && !window['recentHMR'] && (fadeContext.shown !== null ? fadeContext.shown : false), delay);\n\n  var styleFin = _extends({\n    display: 'flex',\n    flexFlow: 'column'\n  }, style, {}, fullscreen && fullscreenStyle);\n\n  if (isTiny) {\n    return React.createElement(\"div\", _extends({\n      style: _extends({\n        display: 'flex',\n        flexFlow: 'column',\n        justifyContent: 'inherit',\n        alignItems: 'inherit'\n      }, style)\n    }, rest), children);\n  }\n\n  return React.createElement(View, _extends({\n    \"data-is\": \"FadeChild\",\n    style: styleFin,\n    animate: shown ? animate : undefined,\n    transition: transition\n  }, rest), children);\n}, \"useIsTiny{isTiny}\\nuseStore{fadeContext}\\nuseDebounceValue{}\", () => [useIsTiny, FadeContext.useStore, useDebounceValue]));\nFadeChild.displayName = \"FadeChild\";\nvar fullscreenStyle = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  right: 0,\n  bottom: 0\n};\nexport var useFadePage = function useFadePage(_temp2) {\n  var _ref2 = _temp2 === void 0 ? {} : _temp2,\n      {\n    delay = 200,\n    threshold = 0.1,\n    off\n  } = _ref2,\n      props = _objectWithoutPropertiesLoose(_ref2, [\"delay\", \"threshold\", \"off\"]);\n\n  var intersection = useDebouncedIntersection(_extends({\n    delay,\n    threshold\n  }, props));\n  var shown = props.shown || intersection.shown || false;\n  var getProps = useGet({\n    shown,\n    off\n  });\n  return {\n    ref: intersection.ref,\n    FadeProvide: useCallback(props => {\n      return React.createElement(FadeContext.Provider, _extends({}, props, getProps()));\n    }, [])\n  };\n};\n\n__signature__(useFadePage, \"useDebouncedIntersection{intersection}\\nuseGet{getProps}\\nuseCallback{}\", () => [useDebouncedIntersection, useGet]);\n\nexport var FadeParent = memo(__signature__((_ref3) => {\n  var {\n    children\n  } = _ref3,\n      props = _objectWithoutPropertiesLoose(_ref3, [\"children\"]);\n\n  var Fade = useFadePage(props);\n  return React.createElement(Fade.FadeProvide, null, React.createElement(View, {\n    nodeRef: Fade.ref\n  }, children));\n}, \"useFadePage{Fade}\", () => [useFadePage]));\nFadeParent.displayName = \"FadeParent\";\nexport var useDebouncedIntersection = function useDebouncedIntersection(props) {\n  if (props === void 0) {\n    props = {\n      delay: 0\n    };\n  }\n\n  var ref = useRef(null);\n  var [shown, setShown] = useState(false);\n  var setShownSlow = useDebounce(setShown, props.delay);\n  var hasShown = useRef(false);\n  useIntersectionObserver({\n    ref,\n    options: {\n      threshold: props.threshold,\n      rootMargin: props.intersection\n    },\n\n    onChange(entries) {\n      // only run once\n      if (hasShown.current && shown) return;\n      var isOffscreen = !entries || entries[0].isIntersecting === false;\n\n      if (props.disable || isOffscreen) {\n        setShownSlow(false);\n      } else {\n        hasShown.current = true;\n        setShownSlow(true);\n      }\n    }\n\n  });\n  return {\n    ref,\n    shown\n  };\n};\n\n__signature__(useDebouncedIntersection, \"useRef{ref}\\nuseState{[shown, setShown](false)}\\nuseDebounce{setShownSlow}\\nuseRef{hasShown}\\nuseIntersectionObserver{}\", () => [useDebounce, useIntersectionObserver]);\n\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(transitions, \"transitions\", \"/Users/nw/projects/motion/orbit/projects/site/views/FadeInView.tsx\");\n  reactHotLoader.register(fadeAnimations, \"fadeAnimations\", \"/Users/nw/projects/motion/orbit/projects/site/views/FadeInView.tsx\");\n  reactHotLoader.register(FadeContext, \"FadeContext\", \"/Users/nw/projects/motion/orbit/projects/site/views/FadeInView.tsx\");\n  reactHotLoader.register(FadeChild, \"FadeChild\", \"/Users/nw/projects/motion/orbit/projects/site/views/FadeInView.tsx\");\n  reactHotLoader.register(fullscreenStyle, \"fullscreenStyle\", \"/Users/nw/projects/motion/orbit/projects/site/views/FadeInView.tsx\");\n  reactHotLoader.register(useFadePage, \"useFadePage\", \"/Users/nw/projects/motion/orbit/projects/site/views/FadeInView.tsx\");\n  reactHotLoader.register(FadeParent, \"FadeParent\", \"/Users/nw/projects/motion/orbit/projects/site/views/FadeInView.tsx\");\n  reactHotLoader.register(useDebouncedIntersection, \"useDebouncedIntersection\", \"/Users/nw/projects/motion/orbit/projects/site/views/FadeInView.tsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/nw/projects/motion/orbit/projects/site/views/FadeInView.tsx"],"names":["createStoreContext","useDebounce","useDebounceValue","useGet","useIntersectionObserver","View","React","memo","useCallback","useRef","useState","useIsTiny","transitions","slowNotBouncy","type","damping","stiffness","slowConfig","normal","fast","fastStatic","duration","fadeAnimations","down","style","opacity","y","animate","up","right","x","rotateX","rotateY","scale","left","txys","FadeContext","FadeContextStore","props","shown","off","FadeChild","transition","children","delay","disable","fullscreen","rest","isTiny","fadeContext","useStore","window","styleFin","display","flexFlow","fullscreenStyle","justifyContent","alignItems","undefined","position","top","bottom","useFadePage","threshold","intersection","useDebouncedIntersection","getProps","ref","FadeProvide","FadeParent","Fade","setShown","setShownSlow","hasShown","options","rootMargin","onChange","entries","current","isOffscreen","isIntersecting"],"mappings":"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","sourcesContent":["import { createStoreContext } from '@o/kit'\nimport { useDebounce, useDebounceValue, useGet, useIntersectionObserver, View, ViewProps } from '@o/ui'\nimport React, { memo, useCallback, useRef, useState } from 'react'\n\nimport { useIsTiny } from '../hooks/useScreenSize'\n\nexport type FadeInProps = ViewProps & {\n  delay?: number\n  intersection?: IntersectionObserverInit['rootMargin']\n  threshold?: number\n  disable?: boolean\n  shown?: boolean\n}\n\nexport const transitions = {\n  slowNotBouncy: {\n    type: 'spring',\n    damping: 13,\n    stiffness: 80,\n  },\n  slowConfig: {\n    type: 'spring',\n    damping: 20,\n    stiffness: 140,\n  },\n  normal: {\n    type: 'spring',\n    damping: 12,\n    stiffness: 100,\n  },\n  fast: {\n    type: 'spring',\n    damping: 15,\n    stiffness: 180,\n  },\n  fastStatic: {\n    duration: 30,\n  },\n}\n\nexport const fadeAnimations = {\n  down: {\n    style: {\n      opacity: 0,\n      y: -20,\n    },\n    animate: {\n      opacity: 1,\n      y: 0,\n    },\n  },\n  up: {\n    style: {\n      opacity: 0,\n      y: 20,\n    },\n    animate: {\n      opacity: 1,\n      y: 0,\n    },\n  },\n  right: {\n    style: {\n      opacity: 0,\n      x: 30,\n      rotateX: -15,\n      rotateY: 15,\n      scale: 0.9,\n    },\n    animate: {\n      opacity: 1,\n      x: 0,\n      rotateX: 0,\n      rotateY: 0,\n      scale: 1,\n    },\n  },\n  left: {\n    style: {\n      opacity: 0,\n      txys: [-30, 15, -15, 0.9],\n      x: -30,\n      rotateX: 15,\n      rotateY: -15,\n      scale: 0.9,\n    },\n    animate: {\n      opacity: 1,\n      x: 0,\n      rotateX: 0,\n      rotateY: 0,\n      scale: 1,\n    },\n  },\n}\n\nconst FadeContext = createStoreContext(\n  class FadeContextStore {\n    props: {\n      shown: boolean\n      off: boolean\n    }\n    get shown() {\n      return this.props.shown\n    }\n    get off() {\n      return this.props.off\n    }\n  },\n)\n\ntype FadeChildProps = ViewProps & {\n  delay?: number\n  disable?: boolean\n  fullscreen?: boolean\n}\n\nexport const FadeChild = memo(\n  ({\n    style = fadeAnimations.down.style,\n    animate = fadeAnimations.down.animate,\n    transition = transitions.normal,\n    children,\n    delay,\n    disable,\n    fullscreen,\n    ...rest\n  }: FadeChildProps) => {\n    const isTiny = useIsTiny()\n    const fadeContext = FadeContext.useStore()\n    const shown = !!useDebounceValue(\n      !disable && !window['recentHMR'] && (fadeContext.shown !== null ? fadeContext.shown : false),\n      delay,\n    )\n    const styleFin = {\n      display: 'flex',\n      flexFlow: 'column',\n      ...style,\n      ...(fullscreen && fullscreenStyle),\n    }\n    if (isTiny) {\n      return (\n        <div\n          style={{\n            display: 'flex',\n            flexFlow: 'column',\n            justifyContent: 'inherit',\n            alignItems: 'inherit',\n            ...style,\n          }}\n          {...rest}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    return (\n      <View\n        data-is=\"FadeChild\"\n        style={styleFin}\n        animate={shown ? animate : undefined}\n        transition={transition}\n        {...rest}\n      >\n        {children}\n      </View>\n    )\n  },\n)\n\nconst fullscreenStyle = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  right: 0,\n  bottom: 0,\n}\n\nexport type UseFadePageProps = FadeInProps & { off?: boolean }\n\nexport const useFadePage = ({\n  delay = 200,\n  threshold = 0.1,\n  off,\n  ...props\n}: UseFadePageProps = {}) => {\n  const intersection = useDebouncedIntersection({ delay, threshold, ...props })\n  const shown = props.shown || intersection.shown || false\n  const getProps = useGet({ shown, off })\n  return {\n    ref: intersection.ref,\n    FadeProvide: useCallback(props => {\n      return <FadeContext.Provider {...props} {...getProps()} />\n    }, []),\n  }\n}\n\nexport const FadeParent = memo(({ children, ...props }: UseFadePageProps & { children?: any }) => {\n  const Fade = useFadePage(props)\n  return (\n    <Fade.FadeProvide>\n      <View nodeRef={Fade.ref}>{children}</View>\n    </Fade.FadeProvide>\n  )\n})\n\nexport const useDebouncedIntersection = (props: FadeInProps = { delay: 0 }) => {\n  const ref = useRef(null)\n  const [shown, setShown] = useState(false)\n  const setShownSlow = useDebounce(setShown, props.delay)\n  const hasShown = useRef(false)\n\n  useIntersectionObserver({\n    ref,\n    options: { threshold: props.threshold, rootMargin: props.intersection },\n    onChange(entries) {\n      // only run once\n      if (hasShown.current && shown) return\n\n      const isOffscreen = !entries || entries[0].isIntersecting === false\n      if (props.disable || isOffscreen) {\n        setShownSlow(false)\n      } else {\n        hasShown.current = true\n        setShownSlow(true)\n      }\n    },\n  })\n\n  return {\n    ref,\n    shown,\n  }\n}\n"]},"metadata":{},"sourceType":"module"}