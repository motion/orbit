#!/bin/bash

. $(dirname $0)/__/common

if [ "$(realpath .)" = "$ROOT" ]; then
  echo "building.... $(pwd)"

  if [ "$1" = "--watch" ]; then
    # WATCH
    ARGS=${@:2}
    (cd app && ../node_modules/.bin/tsc -b -w --preserveWatchOutput $ARGS)
    echo "RAN WATCH"
    wait
  else
    # BUILD
    ARGS=${@:1}
    (cd app && npx tsc -b $ARGS)
    echo "RAN BUILD"
  fi

  exit 0
fi

