{"ast":null,"code":"(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport { BorderRight, Button, Col, gloss, List, Portal, Row, Sidebar, sleep, Space, useOnMount, whenIdle } from '@o/ui';\nimport { useForceUpdate, useReaction } from '@o/use-store';\nimport { debounce } from 'lodash';\nimport { compose, mount, route, withView } from 'navi';\nimport React, { memo, useCallback, useEffect, useRef, useState } from 'react';\nimport { NotFoundBoundary, View } from 'react-navi';\nimport { Header } from '../Header';\nimport { useScreenSize } from '../hooks/useScreenSize';\nimport { usePageTheme } from '../Layout';\nimport { Navigation } from '../Navigation';\nimport { useSiteStore } from '../SiteStore';\nimport { linkProps } from '../useLink';\nimport { ContentSection } from '../views/ContentSection';\nimport { FadeChild, useFadePage } from '../views/FadeInView';\nimport { SectionContent } from '../views/SectionContent';\nimport { BlogFooter } from './BlogPage/BlogLayout';\nimport { DocsContents } from './DocsContents';\nimport { docsItems, docsViews } from './docsItems';\nimport DocsStart from './DocsPage/DocsStart.mdx';\nimport { Example } from './DocsPage/Example';\nimport { ResizeSensor } from './DocsPage/ResizeSensor';\nimport { DocsPageHeader } from './DocsPageHeader';\nimport { docsNavigate, loadDocsPage, preloadItem } from './docsPageHelpers';\nimport { DocsStoreContext } from './DocsStore';\nimport { NotFoundPage } from './NotFoundPage';\nimport { useStickySidebar } from './useStickySidebar';\nwindow['ResizeSensor'] = ResizeSensor;\nvar itemProps = {\n  hideBorder: true,\n  iconProps: {\n    opacity: 0.65\n  }\n};\nvar DocsList = memo(__signature__(() => {\n  var docsStore = DocsStoreContext.useStore();\n  var [mounted, setMounted] = useState(false);\n  useOnMount(async () => {\n    await whenIdle();\n    await sleep(50);\n    await whenIdle();\n    await sleep(50);\n    await whenIdle();\n    await sleep(50);\n    await whenIdle();\n    console.log('MOUNT');\n    setMounted(true);\n  });\n  return React.createElement(List, {\n    query: docsStore.search,\n    searchable: true,\n    selectable: true,\n    alwaysSelected: true,\n    defaultSelected: docsStore.initialIndex,\n    overscanCount: mounted ? 500 : 0,\n    items: docsItems[docsStore.section],\n    itemProps: itemProps,\n    getItemProps: preloadItem,\n    onSelect: useCallback(rows => {\n      if (!rows[0]) {\n        console.warn('no row on select!', rows);\n      } else {\n        docsNavigate(rows[0].id);\n      }\n    }, [])\n  });\n}, \"useStore{docsStore}\\nuseState{[mounted, setMounted](false)}\\nuseOnMount{}\\nuseCallback{}\", () => [DocsStoreContext.useStore, useOnMount]));\nDocsList.displayName = \"DocsList\";\nvar DocsPage = memo(__signature__(props => {\n  var Fade = useFadePage({\n    threshold: 0\n  });\n  var screen = useScreenSize();\n  var siteStore = useSiteStore();\n  var [showSidebar, setShowSidebar] = useState(true);\n  var inputRef = useRef(null);\n  var [themeName, setThemeName] = usePageTheme();\n  useStickySidebar({\n    condition: screen !== 'small',\n    id: '#sidebar',\n    containerSelector: '#main'\n  }); // hide sidebar on show global sidebar\n\n  useReaction(() => siteStore.showSidebar, show => show && setShowSidebar(false));\n  var isSmall = screen === 'small';\n  useEffect(() => {\n    var sub = Navigation.subscribe(() => {\n      if (document.activeElement !== inputRef.current) {\n        inputRef.current.focus();\n      }\n    });\n    return () => {\n      sub.unsubscribe();\n    };\n  }, []);\n  useEffect(() => {\n    var keyPress = e => {\n      // console.log('e', e.keyCode)\n      switch (e.keyCode) {\n        case 84:\n          // t\n          if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') {\n            // dont steal focus, meanie\n            return;\n          }\n\n          if (document.activeElement !== inputRef.current) {\n            // dont focus if already focused\n            return;\n          }\n\n          inputRef.current.focus();\n          break;\n      }\n    };\n\n    window.addEventListener('keydown', keyPress);\n    return () => {\n      window.removeEventListener('keydown', keyPress);\n    };\n  }, []);\n  useEffect(() => {\n    inputRef.current && inputRef.current.focus();\n  }, [inputRef.current]);\n  var sidebarChildren = React.createElement(React.Fragment, {\n    key: \"content\"\n  }, React.createElement(FadeChild, {\n    style: {\n      flex: 1\n    }\n  }, React.createElement(DocsList, null)));\n  return React.createElement(DocsStoreContext.Provider, null, React.createElement(Fade.FadeProvide, null, React.createElement(DocsPageHeader, {\n    isSmall,\n    inputRef,\n    setTheme: setThemeName,\n    theme: themeName,\n    setShowSidebar,\n    siteStore,\n    showSidebar\n  }), React.createElement(Portal, {\n    prepend: true\n  }, React.createElement(Header, {\n    slim: true,\n    noBorder: true\n  })), isSmall && React.createElement(Portal, null, React.createElement(FixedLayout, {\n    isSmall: true\n  }, React.createElement(Sidebar, {\n    hidden: !showSidebar,\n    zIndex: 10000000,\n    elevation: 25,\n    width: 260,\n    pointerEvents: \"auto\",\n    background: theme => theme.background\n  }, sidebarChildren))), React.createElement(\"main\", {\n    className: \"main-contents\"\n  }, React.createElement(SectionContent, null, React.createElement(Row, {\n    id: \"main\",\n    className: \"main\"\n  }, !isSmall && React.createElement(DocsPageSidebar, null, sidebarChildren), React.createElement(Col, {\n    nodeRef: Fade.ref,\n    flex: 1,\n    overflow: \"hidden\",\n    className: \"content\",\n    padding: isSmall ? 0 : [0, 0, 0, 24]\n  }, React.createElement(ContentSection, null, React.createElement(NotFoundBoundary, {\n    render: NotFoundPage\n  }, props.children)))), React.createElement(Space, {\n    size: 250\n  }), React.createElement(BlogFooter, null)))));\n}, \"useFadePage{Fade}\\nuseScreenSize{screen}\\nuseSiteStore{siteStore}\\nuseState{[showSidebar, setShowSidebar](true)}\\nuseRef{inputRef}\\nusePageTheme{[themeName, setThemeName]}\\nuseStickySidebar{}\\nuseReaction{}\\nuseEffect{}\\nuseEffect{}\\nuseEffect{}\", () => [useFadePage, useScreenSize, useSiteStore, usePageTheme, useStickySidebar, useReaction]));\nDocsPage.displayName = \"DocsPage\";\nvar DocsPageSidebar = memo(__signature__((_ref) => {\n  var {\n    children\n  } = _ref;\n  var forceUpdate = useForceUpdate();\n  useEffect(() => {\n    var updateSlow = debounce(forceUpdate, 100);\n    window.addEventListener('resize', updateSlow, {\n      passive: true\n    });\n    return () => {\n      window.removeEventListener('resize', updateSlow);\n    };\n  });\n  return React.createElement(Col, {\n    id: \"sidebar\",\n    width: 250,\n    pointerEvents: \"auto\",\n    height: window.innerHeight\n  }, React.createElement(Col, {\n    position: \"relative\",\n    className: \"sidebar__inner\",\n    flex: 1\n  }, React.createElement(Col, {\n    margin: [25, 0, 0],\n    flex: 1,\n    position: \"relative\"\n  }, children, React.createElement(BorderRight, {\n    top: 10,\n    opacity: 0.5\n  }))));\n}, \"useForceUpdate{forceUpdate}\\nuseEffect{}\", () => [useForceUpdate]));\nDocsPageSidebar.displayName = \"DocsPageSidebar\";\n// @ts-ignore\nDocsPage.theme = 'home';\nvar FixedLayout = gloss({\n  position: 'fixed',\n  top: 120,\n  left: 0,\n  bottom: 0,\n  width: '100%',\n  zIndex: 100000,\n  isSmall: {\n    top: 0,\n    zIndex: 100000000\n  }\n});\n\nvar _default = compose(withView(async () => {\n  if (window.location.pathname.indexOf('/isolate') >= 0) {\n    return React.createElement(DocsChromeSimple, null, React.createElement(View, null));\n  }\n\n  return React.createElement(DocsPage, null, React.createElement(View, {\n    disableScrolling: window['recentHMR']\n  }));\n}), mount({\n  '/': route({\n    title: 'Orbit Documentation',\n    view: React.createElement(DocsContents, {\n      title: \"Introduction\"\n    }, React.createElement(DocsStart, null))\n  }),\n  '/:id': route(async req => {\n    var id = req.params.id;\n    var view = docsViews[id];\n\n    if (!view) {\n      return {\n        view: () => React.createElement(\"div\", null, \"not found\")\n      };\n    }\n\n    var [ChildView, source, examples, examplesSource, types] = await loadDocsPage(view);\n    var item = docsItems.all.find(x => x['id'] === id);\n    return {\n      view: React.createElement(DocsContents, {\n        id: id,\n        title: item ? item['title'] : '',\n        source: source,\n        types: types,\n        examples: examples,\n        examplesSource: examplesSource,\n        beta: item.beta\n      }, React.createElement(ChildView, null))\n    };\n  }),\n  '/:id/isolate/:subid': route(async req => {\n    var id = req.params.id;\n    var view = docsViews[id];\n\n    if (!view) {\n      return {\n        view: () => React.createElement(\"div\", null, \"not found\")\n      };\n    }\n\n    var [_, _2, examples, examplesSource] = await loadDocsPage(view);\n    return {\n      view: React.createElement(Example, {\n        chromeless: true,\n        examples: examples,\n        source: examplesSource,\n        id: req.params.subid,\n        sourceBelow: true,\n        pad: true\n      })\n    };\n  })\n}));\n\nexport default _default;\n\nfunction DocsChromeSimple(_ref2) {\n  var {\n    children\n  } = _ref2;\n  return React.createElement(React.Fragment, null, React.createElement(Header, {\n    slim: true,\n    noBorder: true\n  }), React.createElement(Row, {\n    padding: true\n  }, React.createElement(Button, linkProps(window.location.pathname.split('/').slice(0, 3).join('/')), \"Back to Docs\")), React.createElement(Col, {\n    padding: true\n  }, children));\n}\n\nDocsChromeSimple.displayName = \"DocsChromeSimple\";\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(itemProps, \"itemProps\", \"/Users/nw/projects/motion/orbit/projects/site/pages/DocsPage.tsx\");\n  reactHotLoader.register(DocsList, \"DocsList\", \"/Users/nw/projects/motion/orbit/projects/site/pages/DocsPage.tsx\");\n  reactHotLoader.register(DocsPage, \"DocsPage\", \"/Users/nw/projects/motion/orbit/projects/site/pages/DocsPage.tsx\");\n  reactHotLoader.register(DocsPageSidebar, \"DocsPageSidebar\", \"/Users/nw/projects/motion/orbit/projects/site/pages/DocsPage.tsx\");\n  reactHotLoader.register(FixedLayout, \"FixedLayout\", \"/Users/nw/projects/motion/orbit/projects/site/pages/DocsPage.tsx\");\n  reactHotLoader.register(DocsChromeSimple, \"DocsChromeSimple\", \"/Users/nw/projects/motion/orbit/projects/site/pages/DocsPage.tsx\");\n  reactHotLoader.register(_default, \"default\", \"/Users/nw/projects/motion/orbit/projects/site/pages/DocsPage.tsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/nw/projects/motion/orbit/projects/site/pages/DocsPage.tsx"],"names":["BorderRight","Button","Col","gloss","List","Portal","Row","Sidebar","sleep","Space","useOnMount","whenIdle","useForceUpdate","useReaction","debounce","compose","mount","route","withView","React","memo","useCallback","useEffect","useRef","useState","NotFoundBoundary","View","Header","useScreenSize","usePageTheme","Navigation","useSiteStore","linkProps","ContentSection","FadeChild","useFadePage","SectionContent","BlogFooter","DocsContents","docsItems","docsViews","DocsStart","Example","ResizeSensor","DocsPageHeader","docsNavigate","loadDocsPage","preloadItem","DocsStoreContext","NotFoundPage","useStickySidebar","window","itemProps","hideBorder","iconProps","opacity","DocsList","docsStore","useStore","mounted","setMounted","console","log","search","initialIndex","section","rows","warn","id","DocsPage","props","Fade","threshold","screen","siteStore","showSidebar","setShowSidebar","inputRef","themeName","setThemeName","condition","containerSelector","show","isSmall","sub","subscribe","document","activeElement","current","focus","unsubscribe","keyPress","e","keyCode","tagName","addEventListener","removeEventListener","sidebarChildren","flex","setTheme","theme","background","ref","children","DocsPageSidebar","forceUpdate","updateSlow","passive","innerHeight","FixedLayout","position","top","left","bottom","width","zIndex","location","pathname","indexOf","title","view","req","params","ChildView","source","examples","examplesSource","types","item","all","find","x","beta","_","_2","subid","DocsChromeSimple","split","slice","join"],"mappings":"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","sourcesContent":["import { BorderRight, Button, Col, gloss, List, Portal, Row, Sidebar, sleep, Space, useOnMount, whenIdle } from '@o/ui'\nimport { useForceUpdate, useReaction } from '@o/use-store'\nimport { debounce } from 'lodash'\nimport { compose, mount, route, withView } from 'navi'\nimport React, { memo, useCallback, useEffect, useRef, useState } from 'react'\nimport { NotFoundBoundary, View } from 'react-navi'\n\nimport { Header } from '../Header'\nimport { useScreenSize } from '../hooks/useScreenSize'\nimport { usePageTheme } from '../Layout'\nimport { Navigation } from '../Navigation'\nimport { useSiteStore } from '../SiteStore'\nimport { linkProps } from '../useLink'\nimport { ContentSection } from '../views/ContentSection'\nimport { FadeChild, useFadePage } from '../views/FadeInView'\nimport { SectionContent } from '../views/SectionContent'\nimport { BlogFooter } from './BlogPage/BlogLayout'\nimport { DocsContents } from './DocsContents'\nimport { docsItems, docsViews } from './docsItems'\nimport DocsStart from './DocsPage/DocsStart.mdx'\nimport { Example } from './DocsPage/Example'\nimport { ResizeSensor } from './DocsPage/ResizeSensor'\nimport { DocsPageHeader } from './DocsPageHeader'\nimport { docsNavigate, loadDocsPage, preloadItem } from './docsPageHelpers'\nimport { DocsStoreContext } from './DocsStore'\nimport { NotFoundPage } from './NotFoundPage'\nimport { useStickySidebar } from './useStickySidebar'\n\nwindow['ResizeSensor'] = ResizeSensor\n\nconst itemProps = {\n  hideBorder: true,\n  iconProps: {\n    opacity: 0.65,\n  },\n}\n\nconst DocsList = memo(() => {\n  const docsStore = DocsStoreContext.useStore()\n  const [mounted, setMounted] = useState(false)\n\n  useOnMount(async () => {\n    await whenIdle()\n    await sleep(50)\n    await whenIdle()\n    await sleep(50)\n    await whenIdle()\n    await sleep(50)\n    await whenIdle()\n    console.log('MOUNT')\n    setMounted(true)\n  })\n\n  return (\n    <List\n      query={docsStore.search}\n      searchable\n      selectable\n      alwaysSelected\n      defaultSelected={docsStore.initialIndex}\n      overscanCount={mounted ? 500 : 0}\n      items={docsItems[docsStore.section]}\n      itemProps={itemProps}\n      getItemProps={preloadItem}\n      onSelect={useCallback(rows => {\n        if (!rows[0]) {\n          console.warn('no row on select!', rows)\n        } else {\n          docsNavigate(rows[0].id)\n        }\n      }, [])}\n    />\n  )\n})\n\nconst DocsPage = memo((props: { children?: any }) => {\n  const Fade = useFadePage({\n    threshold: 0,\n  })\n  const screen = useScreenSize()\n  const siteStore = useSiteStore()\n  const [showSidebar, setShowSidebar] = useState(true)\n  const inputRef = useRef(null)\n  const [themeName, setThemeName] = usePageTheme()\n\n  useStickySidebar({\n    condition: screen !== 'small',\n    id: '#sidebar',\n    containerSelector: '#main',\n  })\n\n  // hide sidebar on show global sidebar\n  useReaction(() => siteStore.showSidebar, show => show && setShowSidebar(false))\n\n  const isSmall = screen === 'small'\n\n  useEffect(() => {\n    let sub = Navigation.subscribe(() => {\n      if (document.activeElement !== inputRef.current) {\n        inputRef.current.focus()\n      }\n    })\n    return () => {\n      sub.unsubscribe()\n    }\n  }, [])\n\n  useEffect(() => {\n    const keyPress = e => {\n      // console.log('e', e.keyCode)\n      switch (e.keyCode) {\n        case 84: // t\n          if (\n            document.activeElement.tagName === 'INPUT' ||\n            document.activeElement.tagName === 'TEXTAREA'\n          ) {\n            // dont steal focus, meanie\n            return\n          }\n          if (document.activeElement !== inputRef.current) {\n            // dont focus if already focused\n            return\n          }\n          inputRef.current.focus()\n          break\n      }\n    }\n    window.addEventListener('keydown', keyPress)\n    return () => {\n      window.removeEventListener('keydown', keyPress)\n    }\n  }, [])\n\n  useEffect(() => {\n    inputRef.current && inputRef.current.focus()\n  }, [inputRef.current])\n\n  const sidebarChildren = (\n    <React.Fragment key=\"content\">\n      <FadeChild style={{ flex: 1 }}>\n        <DocsList />\n      </FadeChild>\n    </React.Fragment>\n  )\n\n  return (\n    <DocsStoreContext.Provider>\n      <Fade.FadeProvide>\n        <DocsPageHeader\n          {...{\n            isSmall,\n            inputRef,\n            setTheme: setThemeName,\n            theme: themeName,\n            setShowSidebar,\n            siteStore,\n            showSidebar,\n          }}\n        />\n\n        <Portal prepend>\n          <Header slim noBorder />\n        </Portal>\n\n        {isSmall && (\n          <Portal>\n            <FixedLayout isSmall>\n              <Sidebar\n                hidden={!showSidebar}\n                zIndex={10000000}\n                elevation={25}\n                width={260}\n                pointerEvents=\"auto\"\n                background={theme => theme.background}\n              >\n                {sidebarChildren}\n              </Sidebar>\n            </FixedLayout>\n          </Portal>\n        )}\n\n        <main className=\"main-contents\">\n          <SectionContent>\n            <Row id=\"main\" className=\"main\">\n              {!isSmall && <DocsPageSidebar>{sidebarChildren}</DocsPageSidebar>}\n              <Col\n                nodeRef={Fade.ref}\n                flex={1}\n                overflow=\"hidden\"\n                className=\"content\"\n                padding={isSmall ? 0 : [0, 0, 0, 24]}\n              >\n                <ContentSection>\n                  <NotFoundBoundary render={NotFoundPage}>{props.children}</NotFoundBoundary>\n                </ContentSection>\n              </Col>\n            </Row>\n\n            <Space size={250} />\n\n            <BlogFooter />\n          </SectionContent>\n        </main>\n      </Fade.FadeProvide>\n    </DocsStoreContext.Provider>\n  )\n})\n\nconst DocsPageSidebar = memo(({ children }: any) => {\n  const forceUpdate = useForceUpdate()\n\n  useEffect(() => {\n    const updateSlow = debounce(forceUpdate, 100)\n    window.addEventListener('resize', updateSlow, { passive: true })\n    return () => {\n      window.removeEventListener('resize', updateSlow)\n    }\n  })\n\n  return (\n    <Col id=\"sidebar\" width={250} pointerEvents=\"auto\" height={window.innerHeight}>\n      <Col position=\"relative\" className=\"sidebar__inner\" flex={1}>\n        <Col margin={[25, 0, 0]} flex={1} position=\"relative\">\n          {children}\n          <BorderRight top={10} opacity={0.5} />\n        </Col>\n      </Col>\n    </Col>\n  )\n})\n\n// @ts-ignore\nDocsPage.theme = 'home'\n\nconst FixedLayout = gloss({\n  position: 'fixed',\n  top: 120,\n  left: 0,\n  bottom: 0,\n  width: '100%',\n  zIndex: 100000,\n\n  isSmall: {\n    top: 0,\n    zIndex: 100000000,\n  },\n})\n\nexport default compose(\n  withView(async () => {\n    if (window.location.pathname.indexOf('/isolate') >= 0) {\n      return (\n        <DocsChromeSimple>\n          <View />\n        </DocsChromeSimple>\n      )\n    }\n    return (\n      <DocsPage>\n        <View disableScrolling={window['recentHMR']} />\n      </DocsPage>\n    )\n  }),\n\n  mount({\n    '/': route({\n      title: 'Orbit Documentation',\n      view: (\n        <DocsContents title=\"Introduction\">\n          <DocsStart />\n        </DocsContents>\n      ),\n    }),\n    '/:id': route(async req => {\n      let id = req.params.id\n      const view = docsViews[id]\n\n      if (!view) {\n        return {\n          view: () => <div>not found</div>,\n        }\n      }\n\n      const [ChildView, source, examples, examplesSource, types] = await loadDocsPage(view)\n      const item = docsItems.all.find(x => x['id'] === id)\n\n      return {\n        view: (\n          <DocsContents\n            id={id}\n            title={item ? item['title'] : ''}\n            source={source}\n            types={types}\n            examples={examples}\n            examplesSource={examplesSource}\n            beta={item.beta}\n          >\n            <ChildView />\n          </DocsContents>\n        ),\n      }\n    }),\n    '/:id/isolate/:subid': route(async req => {\n      let id = req.params.id\n      const view = docsViews[id]\n      if (!view) {\n        return {\n          view: () => <div>not found</div>,\n        }\n      }\n      const [_, _2, examples, examplesSource] = await loadDocsPage(view)\n      return {\n        view: (\n          <Example\n            chromeless\n            examples={examples}\n            source={examplesSource}\n            id={req.params.subid}\n            sourceBelow\n            pad\n          />\n        ),\n      }\n    }),\n  }),\n)\n\nfunction DocsChromeSimple({ children }) {\n  return (\n    <>\n      <Header slim noBorder />\n      <Row padding>\n        <Button\n          {...linkProps(\n            window.location.pathname\n              .split('/')\n              .slice(0, 3)\n              .join('/'),\n          )}\n        >\n          Back to Docs\n        </Button>\n      </Row>\n      <Col padding>{children}</Col>\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}