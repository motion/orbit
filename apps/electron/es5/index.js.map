{"version":3,"sources":["../src/index.js"],"names":["start","Constants","app","IS_PROD","updateUrl","require","updater","url","console","log","init","ref","process","argv","find","x","restart","setState","Windows","default","setTimeout","update","module","hot","accept"],"mappings":";;;;;kBAiBwBA,K;;AAjBxB;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;IAAYC,S;;;;;;AAEZ,IAAIC,MAAM,IAAV;;AAEA;AACA,IAAID,UAAUE,OAAd,EAAuB;AACrB,MAAMC,YAAYC,QAAQ,iBAAR,EAA2BC,OAA3B,CAAmCC,GAArD;AACAC,UAAQC,GAAR,CAAY,WAAZ,EAAyBL,SAAzB;AACA,kCAAQM,IAAR,CAAaN,SAAb;AACD;;AAEc,SAASJ,KAAT,GAAiB;AAC9B,mBAAOA,KAAP,CAAa,sDAAb;;AAEA;AACA;;AAEA,yBAAS,eAAO;AACdE,UAAMS,GAAN;AACD,GAFD;AAGD;;AAED,IAAIC,QAAQC,IAAR,CAAaC,IAAb,CAAkB;AAAA,SAAKC,MAAM,SAAX;AAAA,CAAlB,CAAJ,EAA6C;AAC3Cf;AACD;;AAED,SAASgB,OAAT,GAAmB;AACjBR,UAAQC,GAAR,CAAY,wBAAZ;AACAP,MAAIe,QAAJ,CACE;AACED,aAAS;AADX,GADF,EAIE,YAAM;AACJ,QAAME,UAAUb,QAAQ,WAAR,EAAqBc,OAArC;;AAEAC,eAAW,YAAM;AACf;AACA,uBAAOC,MAAP,CAAc,8BAAC,OAAD,OAAd;AACAb,cAAQC,GAAR,CAAY,SAAZ;AACD,KAJD,EAIG,GAJH;AAKD,GAZH;AAcD;;AAED,IAAIa,OAAOC,GAAX,EAAgB;AACdD,SAAOC,GAAP,CAAWC,MAAX,CAAkBR,OAAlB;AACAM,SAAOC,GAAP,CAAWC,MAAX,CAAkB,WAAlB,EAA+BR,OAA/B;AACD","file":"index.js","sourcesContent":["import electronContextMenu from 'electron-context-menu'\nimport electronDebug from 'electron-debug'\nimport updater from 'electron-simple-updater'\nimport React from 'react'\nimport Ionize from '@mcro/ionize'\nimport Windows, { onWindow } from './windows'\nimport * as Constants from '~/constants'\n\nlet app = null\n\n// update checker\nif (Constants.IS_PROD) {\n  const updateUrl = require('../package.json').updater.url\n  console.log('updateUrl', updateUrl)\n  updater.init(updateUrl)\n}\n\nexport default function start() {\n  Ionize.start(<Windows />)\n\n  electronContextMenu()\n  electronDebug()\n\n  onWindow(ref => {\n    app = ref\n  })\n}\n\nif (process.argv.find(x => x === '--start')) {\n  start()\n}\n\nfunction restart() {\n  console.log('got a restart from hmr')\n  app.setState(\n    {\n      restart: true,\n    },\n    () => {\n      const Windows = require('./windows').default\n\n      setTimeout(() => {\n        //Ionize.reset()\n        Ionize.update(<Windows />)\n        console.log('did hmr')\n      }, 500)\n    }\n  )\n}\n\nif (module.hot) {\n  module.hot.accept(restart)\n  module.hot.accept('./windows', restart)\n}\n"]}