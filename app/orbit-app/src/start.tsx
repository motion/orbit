// TODO can we collapse this down to main
